# FILM!
Итоговое выполнение проектной работы Мосиным Александром Сергеевичем по спринтам 16, 17 и 18 учебного курса **Яндекс.Практикум** на программе Фулстек-разработчик.

## Описание проекта
Проект представляет собой онлайн-сервис по бронированию билетов в кинотеатр. На сайте пользователь может посмотреть список фильмов, перейти в карточку конкретного фильма и ознакомиться с его детальным описанием, посмотреть предлагаемые расписания по каждому фильму и создать заказ  по бронированию одного или нескольких мест после ввода необходимых данных.

## Цель проекта
Реализовать бэкенд составляющую проекта "FILM!"

## Задачи
В ходе выполнения проектной работы были реализованы следующие задачи:

1. :white_check_mark: Установлен Nest.js
2. :white_check_mark: К проекту подключен и настроен mongoose для работы с MongoDB
3. :white_check_mark: К проекту подключен и настроен TypeORM для работы с PostgresSQL
4. :white_check_mark: Созданы контроллеры и сервисы для обработки запросов клиентной части
5. :white_check_mark: Созданы репозитории для взаимодействия с одной из баз данных (PostgresSQL или MongoDB)
6. :white_check_mark: Реализован механизм бронирования билетов и обновления информации о занятых/свободных местах
7. :white_check_mark: Осуществлена реализация изменения настроек проекта по средствам создания модуля чтения переменных окружения
8. :white_check_mark: Созданы логгеры DevLogger, JsonLogger и TSKVLogger, подключение соответствующего логгера осуществляется по средствам комбинации переменных окружения ("json, tskv, dev, prod")
9. :white_check_mark: Реализована проверка работы логгеров, контролеров и сервисов приложения по средствам Jest тестов
10. :white_check_mark: Настроен Docker приложения, бэкенд и фронт Docker образы вынесены в GitHub Registry, которые при новых пушах проекта вновь собираются и публикуются в GitHub Registry.
11. :white_check_mark: Настроен удаленный сервер, прикреплено доменное имя и выполнен деплой проекта
12. :white_check_mark: Выпущен SSL сертификат, настроено подключение к сайту по https - [alexm.students.nomorepartiesco.ru](https://alexm.students.nomorepartiesco.ru/).

## Установка
Установка и запуск проект осуществляется двумя способами - локально или через Docker

### Локальная установка 
1. Внутри директорий `backend/` и `frontend/` проекта располагаются файлы `.env.example`, на их основе, и следуя комментариям в них, создайте соответствующе файлы `.env`. В зависимости от указанных настроек в файле `.env` директории `backend/` будет подключен соответствующий репозиторий для работы либо с MongoDB, либо с PostgresSQL  
2. Из каждой директории `backend/` и `frontend/` выполните команду в терминале:  
```
npm ci  
```
3. Из директории `backend/` в терминале выполните команду:  
```
npm run start:dev  
```
бэкенд станет доступен на адресу `http://localhost:3000/`  
4. Из директории `frontend/` в терминале выполните команду:  
```
npm run dev  
```
фронтенд станет доступен по адресу `http://localhost:5173/`  

### Запуск проекта через Docker
1. Внутри директорий `backend/`, `frontend/`, `postgres-settings/` и `pgadmin-settings/` проекта располагаются файлы `.env.example`, на их основе, и следуя комментариям в них, создайте соответствующе файлы `.env`.Через Docker осуществлена реализация работы проекта только для PostgresSQL, учитывайте это при вводе настроек.  
2. Из каждой директории `backend/` и `frontend/` выполните команду в терминале:  
```
npm ci  
```
3. Находясь в основной директории проекта, выполните команду в терминале:  
```
docker compose up -d --build  
```
4. По адресу `http://localhost:8080/` будет доступна PGAdmin. Авторизуйтесь в ней (email, password из `.env` `pgadmin-settings/`). Далее создайте сервер и настройте параметры на вкладке Connection (Host, Maintenance database, Username, Password из `.env` `backend/`)  
5. Готовое приложение будет доступно по адресу `http://localhost/`.

Примечание: В корне проекта располагаются файлы `docker-composeForServer.yml.example` и `docker-composeForServer.yml.example` - это конфигурационные файлы соответсвенно `docker-compose.yml` и `docker-compose.yml`, которые использрвались для онлайн-сервиса [alexm.students.nomorepartiesco.ru](https://alexm.students.nomorepartiesco.ru/) с применением SSL сертификата.